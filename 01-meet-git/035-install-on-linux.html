
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>1.3.1. Linux下安装和使用Git &mdash; GotGit</title>
    
    <link rel="stylesheet" href="../static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="/stylesheets/master.css" type="text/css" />
    <link rel="stylesheet" href="/stylesheets/syntax.css" type="text/css" />
    <link rel="stylesheet" href="../static/worldhello.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../static/jquery.js"></script>
    <script type="text/javascript" src="../static/underscore.js"></script>
    <script type="text/javascript" src="../static/doctools.js"></script>
    <script type="text/javascript" src="../static/translations.js"></script>
    <link rel="top" title="GotGit" href="../index.html" />
    <link rel="up" title="1.3. 安装Git" href="030-installation.html" />
    <link rel="next" title="1.3.2. Mac OS X下安装和使用Git" href="040-install-on-mac.html" />
    <link rel="prev" title="1.3. 安装Git" href="030-installation.html" /> 
  </head>
  <body>
    <div id='header'>
      <h1><a href='/'>World Hello</a></h1>

      <div id='menu'>
        <ul>
          <li><a href='/' id='home-link' title='Home'>首页</a></li>
          <li><a href='/blog.html' id='blog-link' title='Blog'>博客</a></li>
          <li><a href='/doc/' id='docs-link' title='Docs'>文章</a></li>
          <li><a href='/about.html' id='about-link' title='About'>关于</a></li>
          <li><a href='http://github.com/gotgit' target='_blank' title='GitHub' rel='me' id='github-link'>GitHub</a></li>
          <li><a href='http://weibo.com/gotgit' title='微博' target='_blank' id='weibo-link'>微博</a></li>
        </ul>
      </div>
    </div>

    <div class="related">
      <h3>导航</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="总目录"
             accesskey="I">索引</a></li>
        <li class="right" >
          <a href="040-install-on-mac.html" title="1.3.2. Mac OS X下安装和使用Git"
             accesskey="N">下一页</a> |</li>
        <li class="right" >
          <a href="030-installation.html" title="1.3. 安装Git"
             accesskey="P">上一页</a> |</li>
        <li><a href="../index.html">GotGit</a> &raquo;</li>
          <li><a href="index.html" >1. 初识Git</a> &raquo;</li>
          <li><a href="030-installation.html" accesskey="U">1.3. 安装Git</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">內容目录</a></h3>
  <ul>
<li><a class="reference internal" href="#">1.3.1. Linux下安装和使用Git</a><ul>
<li><a class="reference internal" href="#id1">1.3.1.1. 包管理器方式安装</a></li>
<li><a class="reference internal" href="#id2">1.3.1.2. 从源代码开始安装</a></li>
<li><a class="reference internal" href="#git">1.3.1.3. 从Git版本库进行安装</a></li>
<li><a class="reference internal" href="#id3">1.3.1.4. 命令补齐</a></li>
<li><a class="reference internal" href="#id4">1.3.1.5. 中文支持</a></li>
</ul>
</li>
</ul>

  <h4>上一个主题</h4>
  <p class="topless"><a href="030-installation.html"
                        title="上一章">1.3. 安装Git</a></p>
  <h4>下一个主题</h4>
  <p class="topless"><a href="040-install-on-mac.html"
                        title="下一章">1.3.2. Mac OS X下安装和使用Git</a></p>
  <h3>本页</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/01-meet-git/035-install-on-linux.txt"
           rel="nofollow">显示源代码</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>快速搜索</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="转向" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    输入相关的术语，模块，类或者函数名称进行搜索
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="linuxgit">
<h1>1.3.1. Linux下安装和使用Git<a class="headerlink" href="#linuxgit" title="永久链接至标题">¶</a></h1>
<p>Git诞生于Linux平台并做为版本控制系统帅先服务于Linux核心，因此在Linux安装Git是非常方便的。可以通过不同的方式在Linux上安装Git。一种方法是通过Linux发行版的包管理器安装已经编译好的二进制格式的Git软件包。另外一种方式就是从Git源码开始安装。</p>
<div class="section" id="id1">
<h2>1.3.1.1. 包管理器方式安装<a class="headerlink" href="#id1" title="永久链接至标题">¶</a></h2>
<p>用Linux发行版的包管理器安装Git，最为简单，但安装的Git可能不是最新的版本。还有一点要注意，就是Git软件包在有的Linux发行版中可能不叫做git，而叫做git-core。这是因为在Git之前就有一款叫做GNU交互工具（GNU Interactive Tools）的GNU软件在有的Linux发行版（Deian lenny）中已经占用了git的名称。为了以示区分，作为版本控制系统的Git，其软件包在这些平台就被命名为git-core。不过因为作为版本控制系统的Git太有名了，最终导致在一些Linux发行版的最新版本中，将GNU Interactive Tools软件包由git改名为gnuit，将git-core改名为git。所以在下面介绍的在不同的Linux发行版中安装Git时，会看到有git和git-core两个不同的名称。</p>
<ul>
<li><p class="first">Ubuntu 10.10(maverick)或更新版本，Debian(squeeze)或更新版本：</p>
<div class="highlight-python"><div class="highlight"><pre>$ sudo aptitude install git
$ sudo aptitude install git-doc git-svn git-email gitk
</pre></div>
</div>
<p>其中git软件包包含了大部分Git命令，是必装的软件包。</p>
<p>软件包git-svn、git-email、gitk本来也是Git软件包的一部分，但是因为有着不一样的软件包依赖（如更多perl模组，tk等），所以单独作为软件包发布。</p>
<p>软件包git-doc则包含了Git的HTML格式文档，可以选择安装。如果安装了Git的HTML格式的文档，则可以通过执行<strong class="command">git help -w &lt;sub-command&gt;</strong>命令，自动用 Web 浏览器打开相关子命令<tt class="docutils literal"><span class="pre">&lt;sub-command&gt;</span></tt>的HTML帮助。</p>
</li>
<li><p class="first">Ubuntu 10.04(lucid)或更老版本，Debian(lenny)或更老版本：</p>
<p>在老版本的Debian中，软件包git实际上是Gnu Interactive Tools，而非作为版本控制系统的Git。做为版本控制系统的Git在软件包git-core中。</p>
<div class="highlight-python"><div class="highlight"><pre>$ sudo aptitude install git-core
$ sudo aptitude install git-doc git-svn git-email gitk
</pre></div>
</div>
</li>
<li><p class="first">RHEL、Fedora、CentOS:</p>
<div class="highlight-python"><div class="highlight"><pre>$ yum install git
$ yum install git-svn git-email gitk
</pre></div>
</div>
</li>
</ul>
<p>其他发行版安装Git的过程和上面介绍的方法向类似。Git软件包在这些发行版里或称为git，或称为git-core。</p>
</div>
<div class="section" id="id2">
<h2>1.3.1.2. 从源代码开始安装<a class="headerlink" href="#id2" title="永久链接至标题">¶</a></h2>
<p>访问Git的官方网站：<tt class="docutils literal"><span class="pre">http://git-scm.com/</span></tt>。下载Git源码包，例如：<tt class="file docutils literal"><span class="pre">git-1.7.3.5.tar.bz2</span></tt>。</p>
<ul>
<li><p class="first">展开源码包，并进入到相应的目录中。</p>
<div class="highlight-python"><div class="highlight"><pre>$ tar -jxvf git-1.7.3.5.tar.bz2
$ cd git-1.7.3.5/
</pre></div>
</div>
</li>
<li><p class="first">安装方法写在<tt class="file docutils literal"><span class="pre">INSTALL</span></tt>文件当中，参照其中的指示完成安装。下面的命令将Git安装在<tt class="file docutils literal"><span class="pre">/usr/local/bin</span></tt>中。</p>
<div class="highlight-python"><div class="highlight"><pre>$ make prefix=/usr/local all
$ sudo make prefix=/usr/local install
</pre></div>
</div>
</li>
<li><p class="first">安装Git文档（可选）。</p>
<p>编译的文档主要是HTML格式文档，方便通过<strong class="command">git help -w &lt;sub-command&gt;</strong>命令查看。实际上即使不安装Git文档，也可以使用man手册查看Git帮助，使用命令<strong class="command">git help &lt;sub-command&gt;</strong>或者<strong class="command">git &lt;sub-command&gt; &#8211;help</strong>。</p>
<p>编译文档依赖asciidoc，因此需要先安装asciidoc（如果尚未安装的话），然后编译文档。在编译文档时要花费很多时间，要有耐心。</p>
<div class="highlight-python"><div class="highlight"><pre>$ make prefix=/usr/local doc info
$ sudo make prefix=/usr/local \
  install-doc install-html install-info
</pre></div>
</div>
</li>
</ul>
<p>安装完毕之后，就可以在<tt class="file docutils literal"><span class="pre">/usr/local/bin</span></tt>下找到<strong class="program">git</strong>命令。</p>
</div>
<div class="section" id="git">
<h2>1.3.1.3. 从Git版本库进行安装<a class="headerlink" href="#git" title="永久链接至标题">¶</a></h2>
<p>如果在本地克隆一个Git版本库，就可以用版本库同步的方式获取最新版本的Git，这样在下载不同版本的Git源代码时实际上采用了增量方式，会非常的节省时间和空间。当然使用这种方法的前提是已经用其他方法安装好了Git。</p>
<ul>
<li><p class="first">克隆Git版本库到本地。</p>
<div class="highlight-python"><div class="highlight"><pre>$ git clone git://git.kernel.org/pub/scm/git/git.git
$ cd git
</pre></div>
</div>
</li>
<li><p class="first">如果本地已经克隆过一个Git版本库，直接在工作区中更新，以获得最新版本的Git。</p>
<div class="highlight-python"><div class="highlight"><pre>$ git pull
</pre></div>
</div>
</li>
<li><p class="first">执行清理工作，避免前一次编译的遗留文件造成影响。注意下面的操作将丢弃本地对Git代码的改动。</p>
<div class="highlight-python"><div class="highlight"><pre>$ git clean -fdx
$ git reset --hard
</pre></div>
</div>
</li>
<li><p class="first">查看Git的里程碑，选择最新的版本进行安装。例如<tt class="docutils literal"><span class="pre">v1.7.3.5</span></tt>。</p>
<div class="highlight-python"><div class="highlight"><pre>$ git tag
...
v1.7.3.5
</pre></div>
</div>
</li>
<li><p class="first">检出该版本的代码。</p>
<div class="highlight-python"><div class="highlight"><pre>$ git checkout v1.7.3.5
</pre></div>
</div>
</li>
<li><p class="first">执行安装。例如安装到<tt class="file docutils literal"><span class="pre">/usr/local</span></tt>目录下。</p>
<div class="highlight-python"><div class="highlight"><pre>$ make prefix=/usr/local all doc info
$ sudo make prefix=/usr/local install \
  install-doc install-html install-info
</pre></div>
</div>
</li>
</ul>
<p>我在撰写本书的过程中，就通过Git版本库的方式安装，在<tt class="file docutils literal"><span class="pre">/opt/git</span></tt>目录下安装了多个不同版本的Git，以测试Git的兼容性。使用类似下面的脚本，可以批量安装不同版本的Git。</p>
<div class="highlight-python"><div class="highlight"><pre>#!/bin/sh

for ver in      \
    v1.5.0      \
    v1.7.3.5    \
    v1.7.4-rc1  \
; do
    echo &quot;Begin install Git $ver.&quot;;
    git reset --hard
    git clean -fdx
    git checkout $ver || exit 1
    make prefix=/opt/git/$ver all &amp;&amp; \
    sudo make prefix=/opt/git/$ver install || exit 1
    echo &quot;Installed Git $ver.&quot;
done
</pre></div>
</div>
</div>
<div class="section" id="id3">
<h2>1.3.1.4. 命令补齐<a class="headerlink" href="#id3" title="永久链接至标题">¶</a></h2>
<p>Linux的shell环境（bash）通过<tt class="file docutils literal"><span class="pre">bash-completion</span></tt>软件包提供命令补齐功能，能够实现在录入命令参数时按一下或两下TAB键，实现参数的自动补齐或提示。例如输入<strong class="command">git com</strong>后按下TAB键，会自动补齐为<strong class="command">git commit</strong>。</p>
<p>通过包管理器方式安装Git，一般都已经为Git配置好了自动补齐，但是如果是以源码编译方式安装Git，就需要为命令补齐多做些工作。</p>
<ul>
<li><p class="first">将Git源码包中的命令补齐脚本复制到<tt class="file docutils literal"><span class="pre">bash-completion</span></tt>对应的目录中。</p>
<div class="highlight-python"><div class="highlight"><pre>$ cp contrib/completion/git-completion.bash \
     /etc/bash_completion.d/
</pre></div>
</div>
</li>
<li><p class="first">重新加载自动补齐脚本，使之在当前shell中生效。</p>
<div class="highlight-python"><div class="highlight"><pre>$ . /etc/bash_completion
</pre></div>
</div>
</li>
<li><p class="first">为了能够在终端开启时自动加载<tt class="file docutils literal"><span class="pre">bash_completion</span></tt>脚本，需要在本地配置文件<tt class="file docutils literal"><span class="pre">~/.bash_profile</span></tt>或全局文件<tt class="file docutils literal"><span class="pre">/etc/bashrc</span></tt>文件中添加下面的内容。</p>
<div class="highlight-python"><div class="highlight"><pre>if [ -f /etc/bash_completion ]; then
  . /etc/bash_completion
fi
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="id4">
<h2>1.3.1.5. 中文支持<a class="headerlink" href="#id4" title="永久链接至标题">¶</a></h2>
<p>Git的本地化做的并不完善，命令的输出以及命令的帮助还只能输出英文，也许在未来版本会使用gettext实现本地化，就像目前对git-gui命令所做的那样。</p>
<p>使用中文的用户最关心的问题还有：是否可以在提交说明中使用中文？是否可以使用中文文件名或者目录名？是否可以使用中文来命名分支或者里程碑？简单的说，可以在提交说明中使用中文，但是若使用非UTF-8字符集，则需要为Git做些设置。至于使用中文来命名文件、目录或引用，只有在使用UTF-8字符集的环境下才可以（Windows用户使用Cygwin），否则尽量避免使用。</p>
<p><strong>UTF-8字符集</strong></p>
<p>Linux平台的中文用户一般会使用utf-8字符集，Git在utf-8字符集下可以工作的非常好。</p>
<ul class="simple">
<li>在提交时，可以在提交说明中输入中文。</li>
<li>显示提交历史，能够正常显示提交说明中的中文字符。</li>
<li>可以添加中文文件名的文件，并可以在同样utf-8字符集的Linux环境中克隆及检出。</li>
<li>可以创建带有中文字符的里程碑名称。</li>
</ul>
<p>但是默认设置下，带有中文文件名的文件，在工作区状态输出、查看历史更改概要、以及在补丁文件中，文件名不能正确显示为中文，而是用若干8进制编码来显示中文，如下：</p>
<div class="highlight-python"><div class="highlight"><pre>$ git status -s
?? &quot;\350\257\264\346\230\216.txt&quot;
</pre></div>
</div>
<p>通过设置变量<strong class="command">core.quotepath</strong>为<tt class="docutils literal"><span class="pre">false</span></tt>，就可以解决中文文件名在这些Git命令输出中的显示问题。</p>
<div class="highlight-python"><div class="highlight"><pre>$ git config --global core.quotepath false
$ git status -s
?? 说明.txt
</pre></div>
</div>
<p><strong>GBK字符集</strong></p>
<p>但如果Linux平台采用非UTF-8字符集，例如用zh_CN.GBK字符集编码（某些Linux发行版），就要另外再做些工作了。</p>
<ul>
<li><p class="first">设置提交说明显示所使用的字符集为gbk，这样使用<strong class="command">git log</strong>查看提交说明才能够正确显示其中的中文。</p>
<div class="highlight-python"><div class="highlight"><pre>$ git config --global i18n.logOutputEncoding gbk
</pre></div>
</div>
</li>
<li><p class="first">设置录入提交说明时所使用的字符集，以便在commit对象中对字符集正确标注。</p>
<p>Git在提交时并不会对提交说明进行从GBK字符集到UTF-8的转换，但是可以在提交说明中标注所使用的字符集，因此在非UTF-8字符集的平台录入中文，需要用下面指令设置录入提交说明的字符集，以便在commit对象中嵌入正确的编码说明。</p>
<div class="highlight-python"><div class="highlight"><pre>$ git config --global i18n.commitEncoding gbk
</pre></div>
</div>
</li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>导航</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="总目录"
             >索引</a></li>
        <li class="right" >
          <a href="040-install-on-mac.html" title="1.3.2. Mac OS X下安装和使用Git"
             >下一页</a> |</li>
        <li class="right" >
          <a href="030-installation.html" title="1.3. 安装Git"
             >上一页</a> |</li>
        <li><a href="../index.html">GotGit</a> &raquo;</li>
          <li><a href="index.html" >1. 初识Git</a> &raquo;</li>
          <li><a href="030-installation.html" >1.3. 安装Git</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
      <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/"><img alt="知识共享许可协议" style="border-width:0" src="http://i.creativecommons.org/l/by-nc-sa/3.0/88x31.png" /></a>
      <br />
      全部内容以 <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/">Creative Commons 署名-非商业性使用-相同方式共享 3.0 协议发布</a>.
      <br />
        &copy; Copyright 2011, 蒋鑫。
      使用 <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.2.3 创建。

    </div>
  </body>
</html>